webpack_encore:
    # If multiple builds are defined (as shown below), you can disable the default build: or '%kernel.project_dir%/public/build'
    output_path: false
    cache: false
    # Preload all rendered script and link tags automatically via the HTTP/2 Link header
    # Set attributes that will be rendered on all script and link tags
    script_attributes:
        defer: true
        # If using Encore.enableIntegrityHashes() and need the crossorigin attribute (default: false, or use 'anonymous' or 'use-credentials')
        crossorigin: 'anonymous'
        'data-turbo-track': reload
        # referrerpolicy: origin
        # Uncomment (also under link_attributes) if using Turbo Drive
        # https://turbo.hotwired.dev/handbook/drive#reloading-when-assets-change
        # 'data-turbo-track': reload
    link_attributes:
         'data-turbo-track': reload
    #     referrerpolicy: origin
        # Uncomment if using Turbo Drive
        # 'data-turbo-track': reload
    # Throw an exception if the entrypoints.json file is missing or an entry is missing from the data
    # strict_mode: false
    # If you have multiple builds:
    builds:
        vendor: '%kernel.project_dir%/public/build/vendor'
        front_default: '%kernel.project_dir%/public/build/front/default'
        gdpr: '%kernel.project_dir%/public/build/gdpr'
        admin: '%kernel.project_dir%/public/build/admin'
        security: '%kernel.project_dir%/public/build/security'

framework:
    assets:
        packages:
            vendor:
                json_manifest_path: '%kernel.project_dir%/public/build/vendor/manifest.json'
            front_default:
                json_manifest_path: '%kernel.project_dir%/public/build/front/default/manifest.json'
            gdpr:
                json_manifest_path: '%kernel.project_dir%/public/build/gdpr/manifest.json'
            admin:
                json_manifest_path: '%kernel.project_dir%/public/build/admin/manifest.json'
            security:
                json_manifest_path: '%kernel.project_dir%/public/build/security/manifest.json'

when@prod:
    webpack_encore:
        # Cache the entrypoints.json (rebuild Symfony's cache when entrypoints.json changes)
        # Available in version 1.2
        cache: true
        preload: true

when@preprod:
    webpack_encore:
        # Cache the entrypoints.json (rebuild Symfony's cache when entrypoints.json changes)
        # Available in version 1.2
        cache: true
        preload: true

#when@test:
#    webpack_encore:
#        strict_mode: false