{% extends 'core/email/base-felix.html.twig' %}

{% trans_default_domain 'security' %}

{% set resetLink = app.request.getSchemeAndHttpHost() ~ path('security_password_confirm', {_locale: app.request.locale, token: token|url_encode}) %}

{% block metaTitle %}{{ ('Password reset')|trans|striptags }}{% endblock %}

{% block preheader %}
    {{ 'Click the button below to reset your password.'|trans }}
{% endblock %}

{% block headerRight %}
    {{ 'Account security'|trans }}
{% endblock %}

{% block title %}
    {{ 'Reset your password'|trans }}
{% endblock %}

{% block body %}

    <p style="margin:0 0 10px 0;">
        {{ 'Hello{name},'|trans({ '{name}': (userName is defined and userName ? ' ' ~ userName : '') }) }}
    </p>

    <p style="margin:0 0 14px 0;">
        {{ 'You requested to reset your password. Click the button below to proceed.'|trans }}
    </p>

    {# Button (bulletproof: VML for Outlook + normal fallback) #}
    <p style="margin:0 0 12px 0;">
        <!--[if mso]>
        <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" href="{{ resetLink }}"
                     style="height:44px;v-text-anchor:middle;width:320px;" arcsize="22%"
                     stroke="f" fillcolor="#7C6CFF">
            <w:anchorlock/>
            <center style="color:#0B1020;font-family:Arial,Helvetica,sans-serif;font-size:14px;font-weight:bold;">
                {{ 'Reset my password'|trans }}
            </center>
        </v:roundrect>
        <![endif]-->

        <!--[if !mso]><!-- -->
    <table role="presentation" cellpadding="0" cellspacing="0" border="0" class="btn" style="border-collapse:separate;">
        <tr>
            <td align="center" bgcolor="#7C6CFF" style="border-radius:12px;">
                <a href="{{ resetLink }}" target="_blank"
                   style="display:inline-block; padding:12px 18px; font-family:Arial, Helvetica, sans-serif; font-size:14px; font-weight:800; color:#0B1020; text-decoration:none; border-radius:12px;">
                    {{ 'Reset my password'|trans }}
                </a>
            </td>
        </tr>
    </table>
    <!--<![endif]-->
    </p>

    <p style="margin:0 0 10px 0;">
        {{ 'This link is valid for {hours} hours. After that, you will need to submit a new request.'|trans({ '{hours}': 24 }) }}
    </p>

    <p style="margin:0 0 14px 0;">
        {{ 'If you did not request this password reset, you can safely ignore this email. No changes will be made without your action.'|trans }}
    </p>

    <p style="margin:0; font-size:11.5px; line-height:1.6;">
        {{ 'If the button does not work, copy and paste this link into your browser:'|trans }}<br>
        <a href="{{ resetLink }}" target="_blank"
           style="color:#B179FF; text-decoration:underline; word-break:break-word;">
            {{ resetLink }}
        </a>
    </p>

{% endblock %}

{% block info %}
    {{ 'This email was sent to you because we received a request to change the password for your account.'|trans }}
{% endblock %}
